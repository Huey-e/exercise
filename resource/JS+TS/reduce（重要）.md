è¯´åˆ°å¤„ç†æ•°ç»„çš„æ–¹æ³•ï¼Œæƒ³å¿…å¤§å®¶éƒ½ä¸é™Œç”Ÿäº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸‹ç†æ•°ç»„å¸¸è§åœºæ™¯ä¸‹çš„ğŸ†•æ–¹æ³•ã€‚

é¦–å…ˆæ¥çœ‹çœ‹ `reduce` æ–¹æ³•å¯ä»¥ä¼ å…¥å“ªäº›å‚æ•°![image_b8706b67.png](http://markdown.liangtengyu.com:9999/images//image_b8706b67.png)

```java
function(pre,cur,index,arr)
```

 *  pre:å¿…éœ€ï¼Œåˆå§‹å€¼æˆ–è®¡ç®—ç»“æŸåçš„è¿”å›å€¼
 *  cur:éå¿…éœ€ï¼Œå½“å‰å¤„ç†çš„å…ƒç´ 
 *  index:éå¿…éœ€ï¼Œå½“å‰å¤„ç†å…ƒç´ çš„ç´¢å¼•
 *  arr:éå¿…éœ€ï¼Œå½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡

ç›´æ¥çœ‹çœ‹ğŸŒ°

```java
constÂ listÂ =Â [1,2,3,4,5]
constÂ resultÂ =Â list.reduce(functionÂ (pre,Â cur,Â index,Â arr)Â {
Â Â console.log('pre:'Â +Â pre,Â 'cur:'Â +Â cur,Â 'index:'Â +Â index)
Â Â returnÂ preÂ +Â cur
})
console.log(result)

//Â =>Â pre:1Â cur:2Â index:1
//Â =>Â pre:3Â cur:3Â index:2
//Â =>Â pre:6Â cur:4Â index:3
//Â =>Â pre:10Â cur:5Â index:4
//Â =>Â 15
```

å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€è½®preçš„å€¼æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œç„¶åå½“å‰å¤„ç†å…ƒç´ ç›´æ¥æ˜¯å…ƒç´ çš„ç¬¬äºŒä¸ªæ•°æ®ï¼Œç´¢å¼•æ˜¯æ•°ç»„çš„1ã€‚ç¬¬äºŒè½®çš„preå°±æ˜¯ç¬¬ä¸€æ¬¡é€»è¾‘å¤„ç† `return pre + cur` è¿”å›çš„ç»“æœ(å³3)ã€‚ä»¥æ­¤ç±»æ¨...å…±å¾ªç¯4è½®ã€‚

å†æ¥çœ‹ä¸ªç›¸ä¹˜çš„å¤„ç†é€»è¾‘çš„:

```java
constÂ listÂ =Â [1,2,3,4,5]
constÂ resultÂ =Â list.reduce(functionÂ (pre,Â cur,Â index,Â arr)Â {
Â Â console.log('pre:'Â +Â pre,Â 'cur:'Â +Â cur,Â 'index:'Â +Â index)
Â Â returnÂ preÂ *Â cur
})
console.log(result)

//Â =>Â pre:1Â cur:2Â index:1
//Â =>Â pre:2Â cur:3Â index:2
//Â =>Â pre:6Â cur:4Â index:3
//Â =>Â pre:24Â cur:5Â index:4
//Â =>Â 120
```

çœ‹ç€è¿™ä¹ˆå¤æ‚ï¼Œèƒ½ä¸¾ä¸ªå†ç®€å•çš„ä¾‹å­å—ï¼Ÿåˆ«é—®ï¼Œé—®å°±æ˜¯æœ‰ï¼

```java
constÂ resultÂ =Â list.reduce((pre,Â cur)Â =>Â preÂ +Â cur)
console.log(result)Â //Â =>Â 15
```

ç®€å•åå†æ¥ä¸ªé«˜çº§ç‚¹çš„å°é²œä¸‹

### æ•°ç»„å»é‡ 

å°†æ•°ç»„ä¼ è¾“ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹ `reduce` çš„å¦å¤–ä¸€ä¸ªï¼Œå³ initialValueã€‚å®ƒæ˜¯ä»£è¡¨ä¼ é€’ç»™å‡½æ•°çš„åˆå§‹å€¼ï¼Œã€Œå¯ä»¥ç†è§£ä¸ºç»™preè®¾ç½®äº†é»˜è®¤çš„å€¼ã€ã€‚

```java
constÂ listÂ =Â [1,1,3,5,5,7,9]
letÂ arrÂ =Â list.reduce((pre,cur)=>{
Â Â if(!pre.includes(cur)){
Â Â Â Â returnÂ pre.concat(cur)
Â Â }else{
Â Â Â Â returnÂ pre
Â Â }
},[])Â //Â =>Â ç»™preè®¾ç½®é»˜è®¤çš„ç©ºæ•°ç»„[]
console.log(arr)Â //Â =>Â [1,Â 3,Â 5,Â 7,Â 9]
```

å¯ä»¥çœ‹åˆ°listæ•°ç»„çš„é•¿åº¦ä¸º7ï¼Œå…±å¾ªç¯7æ¬¡(è®¾ç½®é»˜è®¤çš„ç©ºæ•°ç»„ï¼Œå¯¼è‡´curç¬¬ä¸€è½®æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°æ®)ã€‚æ¯å¾ªç¯ä¸€æ¬¡å°±åˆ¤æ–­preæ•°ç»„é‡Œå­˜ä¸å­˜åœ¨å½“å‰å¾ªç¯çš„å…ƒç´ ï¼Œè‹¥ä¸å­˜åœ¨åˆ™åŠ å…¥åˆ°preæ•°ç»„å»ï¼Œå¦åˆ™å°±ç›´æ¥é€€å‡ºå½“å‰å¾ªç¯ã€‚

### æ•°ç»„äºŒç»´è½¬ä¸€ç»´ 

```java
letÂ arrÂ =Â [1,2,[4,Â 6],Â [1,Â 6],Â [2,Â 2]]
letÂ newArrÂ =Â arr.reduce((pre,cur)=>{
Â Â returnÂ pre.concat(cur)
},[])
console.log(newArr)Â //Â =>Â [1,Â 2,Â 4,Â 6,Â 1,Â 6,Â 2,Â 2]
```

è¿™é‡Œå…¶å®ä¹Ÿå°±æ˜¯åˆ©ç”¨äº†æ•°ç»„çš„ `concat` æ–¹æ³•ï¼Œè·Ÿä¸Šé¢çš„ä½¿ç”¨ä¹Ÿæ˜¯å¤§åŒå°å¼‚ï¼Œç†é¡ºä¸€ä¸‹å°±å¯ä»¥ç†è§£çš„äº†ã€‚

### æ•°ç»„å¤šç»´è½¬ä¸€ç»´ 

```java
let arr = [1, 2, [4, 6], [1, 6, [3, 6]], [1, [3, 4, [1, 2]], [2, 2]]]
const newArr = (arr) => {
  return arr.reduce((pre, cur) => {
    return pre.concat(Array.isArray(cur) ? newArr(cur) : cur)
  }, [])
}
console.log(newArr(arr)) // => [1, 2, 4, 6, 1, 6, 3, 6, 1, 3, 4, 1, 2, 2, 2]
```

è¿™é‡Œä½¿ç”¨äº† ä¸‰ç›®è¿ç®— ã€ concat æ•°æ®æ‹¼æ¥ ã€é€’å½’ çš„æ€è·¯å®Œæˆã€‚å…ˆåˆ¤æ–­å½“å‰å¤„ç†çš„å…ƒç´ (æœ‰å¯èƒ½æ˜¯æ•°ç»„)æ˜¯ä¸æ˜¯æ•°ç»„(Array.isArray(cur)),å¦‚æœæ˜¯å†æ¬¡æ‰§è¡ŒnewArr,å¦åˆ™å°±ç›´æ¥å¤„ç†å½“å‰å…ƒç´ ï¼Œå³å°†curæ‹¼æ¥è¿›ä¹‹å‰å¤„ç†çš„æ•°ç»„ä¸­ã€‚

### è®¡ç®—å…ƒç´ å‡ºç°ä¸ªæ•° 

è®²è§£è¿™ä¸ªä¹‹å‰æˆ‘ä»¬å…ˆæ¥å›å¿†ä¸‹for...inçš„ç”¨æ³•:

> â
> 
> for...in å£°æ˜ç”¨äºå¯¹æ•°ç»„æˆ–è€…å¯¹è±¡çš„å±æ€§è¿›è¡Œå¾ªç¯/è¿­ä»£æ“ä½œã€‚
> 
> â

ç›´æ¥ä¸ŠğŸŒ°

```java
varÂ arrÂ =Â ['å¼ ä¸‰','æå››','ç‹äº”']Â Â Â Â 
forÂ (letÂ xÂ inÂ arr)Â Â 
{Â Â 
Â Â console.log(x)
Â Â //Â =>Â å¼ ä¸‰
Â Â //Â =>Â æå››
Â Â //Â =>Â ç‹äº”
}Â Â 
```

å¯ä»¥çœ‹åˆ°å½“arrä¸ºæ•°ç»„æ—¶ x ç›¸å½“äº for å¾ªç¯çš„â¬‡ï¸ æ ‡

é‚£å½“arrä¸ºå¯¹è±¡å‘¢ï¼Ÿ

```java
constÂ objÂ =Â {Â Â 
Â Â name:Â "å¼ ä¸‰",Â Â 
Â Â age:Â 18,Â Â 
Â Â height:Â "180"Â Â 
}Â Â 
for(letÂ keyÂ inÂ obj){Â Â 
Â Â console.log(key)Â 
Â Â //Â =>Â name
Â Â //Â =>Â age
Â Â //Â =>Â height
}Â Â 
```

å¯ä»¥çœ‹åˆ°å½“å¾ªç¯çš„â€œå¯¹è±¡â€æ˜¯å¯¹è±¡æ—¶ï¼Œå¾ªç¯çš„å•é¡¹å°±æ˜¯å¯¹è±¡çš„å±æ€§ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªç‰¹æ€§æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„/å¯¹è±¡çš„å…ƒç´ /å±æ€§ã€‚

```java
//Â æ•°ç»„æ—¶åˆ¤æ–­ä¸‹æ ‡
letÂ arrÂ =Â ["a","b","2","3"]Â 
console.log("b"Â inÂ arr)Â //Â =>Â false
console.log(2Â inÂ arr)Â //Â =>Â true

//Â å¯¹è±¡æ—¶åˆ¤æ–­å±æ€§
letÂ objÂ =Â {a:"a",b:"b",c:"2",d:"3"}Â 
console.log("b"Â inÂ obj)Â //Â =>Â true
console.log(2Â inÂ obj)Â //Â =>Â false
```

å¥½çš„ï¼Œå›å¿†å®Œè¿™äº›çŸ¥è¯†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆå®Œæˆè¿™ä¸ªéœ€æ±‚![image_8136c9aa.png](http://markdown.liangtengyu.com:9999/images//image_8136c9aa.png)

```java
letÂ namesÂ =Â ['å¼ ä¸‰',Â 'æå››',Â 'å¼ ä¸‰',Â 'ç‹äº”',Â 'ç‹äº”',Â 'ç‹äº”']
letÂ totalÂ =Â names.reduce((pre,cur)=>{
Â Â if(curÂ inÂ pre){
Â Â Â Â pre[cur]++
Â Â Â Â console.log("åˆ¤æ–­ä¸ºçœŸ:")
Â Â Â Â console.log(pre)
Â Â }else{
Â Â Â Â pre[cur]Â =Â 1
Â Â Â Â console.log("åˆ¤æ–­ä¸ºå‡:")
Â Â Â Â console.log(pre)
Â Â }
Â Â returnÂ pre
},{})
console.log(total);Â //Â =>Â {å¼ ä¸‰:Â 2,Â æå››:Â 1,Â ç‹äº”:Â 3}
```

é¦–å…ˆå…ˆä¼ å…¥ä¸€ä¸ª\{\}å¯¹è±¡ï¼Œè¯´æ˜åˆå§‹çš„preä¸º\{\}ã€‚é‚£ä¹ˆç¬¬ä¸€è½®åˆ¤æ–­ifçš„æ—¶å€™å°±å˜æˆ `'å¼ ä¸‰' in {}` å¾ˆæ˜æ˜¾æ­¤æ—¶åˆ¤æ–­æ¡ä»¶æ˜¯ false ã€‚æ‰€ä»¥å°±æ‰§è¡Œ else é‡Œé¢çš„é€»è¾‘åå˜æˆ:`{'å¼ ä¸‰':1}`ã€‚ç¬¬äºŒè½®æ—¶ æå›› ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å½“ç¬¬ä¸‰è½®æ—¶å†æ¬¡é‡åˆ°â€œå¼ ä¸‰â€,æ­¤æ—¶å¯¹è±¡æ˜¯ `{'å¼ ä¸‰':1,'æå››':1}` ,æ‰€ä»¥ifåˆ¤æ–­æ˜¯ true ,æ‰€ä»¥å¼ ä¸‰ç›´æ¥+1ã€‚æ¥çœ‹çœ‹æ‰“å°æƒ…å†µ:

```java
åˆ¤æ–­ä¸ºå‡:
//Â =>Â {å¼ ä¸‰:Â 1}
åˆ¤æ–­ä¸ºå‡:
//Â =>Â {å¼ ä¸‰:Â 1,Â æå››:Â 1}
åˆ¤æ–­ä¸ºçœŸ:
//Â =>Â {å¼ ä¸‰:Â 2,Â æå››:Â 1}
åˆ¤æ–­ä¸ºå‡:
//Â =>Â {å¼ ä¸‰:Â 2,Â æå››:Â 1,Â ç‹äº”:Â 1}
åˆ¤æ–­ä¸ºçœŸ:
//Â =>Â {å¼ ä¸‰:Â 2,Â æå››:Â 1,Â ç‹äº”:Â 2}
åˆ¤æ–­ä¸ºçœŸ:
//Â =>Â {å¼ ä¸‰:Â 2,Â æå››:Â 1,Â ç‹äº”:Â 3}
```

### å±æ€§æ±‚å’Œ 

```java
constÂ listÂ =Â [
Â Â {
Â Â Â Â name:Â 'å¼ ä¸‰',
Â Â Â Â age:Â 18
Â Â },
Â Â {
Â Â Â Â name:Â 'æå››',
Â Â Â Â age:Â 20
Â Â },
Â Â {
Â Â Â Â name:Â 'ç‹äº”',
Â Â Â Â age:Â 22
Â Â }
]
letÂ totalÂ =Â list.reduce((pre,Â cur)Â =>Â {
Â Â console.log(cur)Â 
Â Â //Â =>Â {name:Â 'å¼ ä¸‰',Â age:Â 18}
Â Â //Â =>Â {name:Â 'æå››',Â age:Â 20}
Â Â //Â =>Â {name:Â 'ç‹äº”',Â age:Â 22}
Â Â returnÂ cur.ageÂ +Â pre
},Â 0)
console.log(total)Â //Â =>Â 60
```

å¦‚æ­¤æ˜¯ä¸æ˜¯çœäº†ä½¿ç”¨ map å»æ±‚å’Œå‘¢ï¼Ÿæ›´ç®€ä¾¿å¯ä»¥è¿™ä¹ˆå†™:

```java
letÂ totalÂ =Â list.reduce((pre,Â cur)Â =>Â cur.ageÂ +Â pre,Â 0)
```

åˆ°æ­¤ï¼Œä»Šæ—¥çš„å‰ç«¯å‘ç°çŸ¥è¯†åˆ†äº«å°±åˆ°æ­¤ç»“æŸäº†ã€‚å–œæ¬¢æ–‡ç« çš„å°ä¼™ä¼´å¯ä»¥ç‚¹ä¸ªèµã€ç‚¹ä¸ªå…³æ³¨ã€ç‚¹ä¸ªåœ¨çœ‹å•¦![image_2a503c81.png](http://markdown.liangtengyu.com:9999/images//image_2a503c81.png)
