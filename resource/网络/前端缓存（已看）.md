- [å‰è¨€](#å‰è¨€)
  - [ä»€ä¹ˆæ˜¯webç¼“å­˜ï¼Ÿ](#ä»€ä¹ˆæ˜¯webç¼“å­˜)
  - [ç¼“å­˜å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿä»–çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ](#ç¼“å­˜å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ä»–çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ)
  - [å¼ºåˆ¶ç¼“å­˜](#å¼ºåˆ¶ç¼“å­˜)
    - [åŸºäºExpireså­—æ®µå®ç°çš„å¼ºç¼“å­˜](#åŸºäºexpireså­—æ®µå®ç°çš„å¼ºç¼“å­˜)
    - [åŸºäºCache-controlå®ç°çš„å¼ºç¼“å­˜ï¼ˆä»£æ›¿Expiresçš„å¼ºç¼“å­˜å®ç°æ–¹æ³•ï¼‰](#åŸºäºcache-controlå®ç°çš„å¼ºç¼“å­˜ä»£æ›¿expiresçš„å¼ºç¼“å­˜å®ç°æ–¹æ³•)
    - [no-cacheå’Œno-store](#no-cacheå’Œno-store)
    - [publicå’Œprivate](#publicå’Œprivate)
    - [max-ageå’Œs-maxage](#max-ageå’Œs-maxage)
  - [åå•†ç¼“å­˜](#åå•†ç¼“å­˜)
    - [åŸºäºlast-modifiedçš„åå•†ç¼“å­˜](#åŸºäºlast-modifiedçš„åå•†ç¼“å­˜)
    - [åŸºç¡€ETagçš„åå•†ç¼“å­˜](#åŸºç¡€etagçš„åå•†ç¼“å­˜)
    - [ETagä¹Ÿæœ‰ç¼ºç‚¹](#etagä¹Ÿæœ‰ç¼ºç‚¹)
- [è¿½åŠ ](#è¿½åŠ )
  - [å¦‚ä½•è®¾ç½®ç¼“å­˜](#å¦‚ä½•è®¾ç½®ç¼“å­˜)
  - [å“ªäº›æ–‡ä»¶å¯¹åº”å“ªäº›ç¼“å­˜](#å“ªäº›æ–‡ä»¶å¯¹åº”å“ªäº›ç¼“å­˜)
- [æ€»ç»“ä¸€ä¸‹](#æ€»ç»“ä¸€ä¸‹)
- [ä½œè€…ï¼šå·¥è¾¹é¡µå­—](#ä½œè€…å·¥è¾¹é¡µå­—)

# å‰è¨€ 

webç¼“å­˜æ˜¯é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…ä¿®æŠ€èƒ½ã€‚æ˜¯æˆ‘ä»¬å˜æˆå¤§ç‰›è¿‡ç¨‹ä¸­ç»•ä¸å¼€çš„çŸ¥è¯†ç‚¹ã€‚

æ–‡ç« ä¼šå°½é‡ç”¨é€šä¿—æ˜“æ‡‚çš„è¨€è¯­æ¥ç»†è¯´webç¼“å­˜çš„æ¦‚å¿µå’Œç”¨å¤„ã€‚

æœ¬æœŸæ–‡ç« çš„å¤§çº²æ˜¯

1.  ä»€ä¹ˆæ˜¯webç¼“å­˜ï¼ˆå‰ç«¯ç¼“å­˜ï¼‰
2.  ç¼“å­˜å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿä»–çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ
3.  å¼ºåˆ¶ç¼“å­˜åŸç†è®²è§£
    
    3.1.åŸºäºExpireså­—æ®µå®ç°çš„å¼ºç¼“å­˜
    
    3.2.åŸºäºCache-controlå®ç°çš„å¼ºç¼“å­˜
4.  åå•†ç¼“å­˜åŸç†è®²è§£
    
    4.1.åŸºäºlast-modifiedå®ç°çš„åå•†ç¼“å­˜
    
    4.2.åŸºäºETagå®ç°çš„åå•†ç¼“å­˜

## ä»€ä¹ˆæ˜¯webç¼“å­˜ï¼Ÿ 

webç¼“å­˜ä¸»è¦æŒ‡çš„æ˜¯ä¸¤éƒ¨åˆ†ï¼šæµè§ˆå™¨ç¼“å­˜å’Œhttpç¼“å­˜ã€‚

å…¶ä¸­httpç¼“å­˜æ˜¯webç¼“å­˜çš„æ ¸å¿ƒï¼Œæ˜¯æœ€éš¾æ‡‚çš„é‚£ä¸€éƒ¨åˆ†,ä¹Ÿæ˜¯æœ€é‡è¦çš„é‚£ä¸€éƒ¨åˆ†ã€‚

æµè§ˆå™¨ç¼“å­˜ï¼šæ¯”å¦‚,localStorage,sessionStorage,cookieç­‰ç­‰ã€‚è¿™äº›åŠŸèƒ½ä¸»è¦ç”¨äºç¼“å­˜ä¸€äº›å¿…è¦çš„æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ã€‚æ¯”å¦‚éœ€è¦æºå¸¦åˆ°åç«¯çš„å‚æ•°ã€‚äº¦æˆ–è€…æ˜¯ä¸€äº›åˆ—è¡¨æ•°æ®ç­‰ç­‰ã€‚

ä¸è¿‡è¿™é‡Œéœ€è¦æ³¨æ„ã€‚åƒlocalStorageï¼ŒsessionStorageè¿™ç§ç”¨æˆ·ç¼“å­˜æ•°æ®çš„åŠŸèƒ½ï¼Œä»–åªèƒ½ä¿å­˜5Må·¦å³çš„æ•°æ®ï¼Œå¤šäº†ä¸è¡Œã€‚cookieåˆ™æ›´å°‘ï¼Œå¤§æ¦‚åªèƒ½æœ‰4kbçš„æ•°æ®ã€‚ä¸è¦æ‹…å¿ƒï¼Œè¿™äº›æ¦‚å¿µå¯¹äºæœªæ¥ä¼šç§°ä¸ºå‰ç«¯å¤§ç‰›çš„ä½ æ¥è¯´éƒ½ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œéå¸¸çš„ç®€å•ã€‚å› ä¸ºå¤ªç®€å•ï¼Œæ•°æ®ç¼“å­˜ä¸å†è¿™ç¯‡æ–‡ç« çš„ä»‹ç»ä¸­ï¼Œè¿™é‡Œä¸€ç¬”å¸¦è¿‡ï¼Œéœ€è¦äº†è§£çš„å°ä¼™ä¼´ï¼Œå¯ä»¥ç§»æ­¥æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« å‰ç«¯æ–°èƒ½ä¼˜åŒ–ç¯‡ä¹‹localStorageå’ŒsessionStorageçš„åŒºåˆ«åŠå…¶ä½¿ç”¨æ–¹å¼ \\- æ˜é‡‘ \\(juejin.cn\\)\[1\]ã€‚

è¿™ç¯‡æ–‡ç« é‡ç‚¹è®²è§£çš„æ˜¯ï¼šå‰ç«¯httpç¼“å­˜ã€‚

httpç¼“å­˜

> å®˜æ–¹ä»‹ç»:Web ç¼“å­˜æ˜¯å¯ä»¥è‡ªåŠ¨ä¿å­˜å¸¸è§æ–‡æ¡£å‰¯æœ¬çš„ HTTP è®¾å¤‡ã€‚å½“ Web è¯·æ±‚æŠµè¾¾ç¼“å­˜æ—¶ï¼Œ å¦‚æœæœ¬åœ°æœ‰â€œå·²ç¼“å­˜çš„â€å‰¯æœ¬ï¼Œå°±å¯ä»¥ä»æœ¬åœ°å­˜å‚¨è®¾å¤‡è€Œä¸æ˜¯åŸå§‹æœåŠ¡å™¨ä¸­æå–è¿™ ä¸ªæ–‡æ¡£ã€‚

ä¸¾ä¸ªä¾‹å­â†“

![image_743bc9f9.png](../images//image_743bc9f9.png) image.png

çœ‹å›¾ï¼Œé—®é¢˜å°±æ˜¯å‡ºåœ¨ï¼ŒæœåŠ¡å™¨éœ€è¦å¤„ç†httpçš„è¯·æ±‚ï¼Œå¹¶ä¸”httpå»ä¼ è¾“æ•°æ®ï¼Œéœ€è¦å¸¦å®½ï¼Œå¸¦å®½æ˜¯è¦é’±ä¹°çš„å•Šã€‚è€Œæˆ‘ä»¬ç¼“å­˜ï¼Œå°±æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨ä¸å»å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥æ‹¿åˆ°æ•°æ®ã€‚

> æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç¼“å­˜ä¸»è¦æ˜¯é’ˆå¯¹html,css,imgç­‰é™æ€èµ„æºï¼Œå¸¸è§„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä¼šå»ç¼“å­˜ä¸€äº›åŠ¨æ€èµ„æºï¼Œå› ä¸ºç¼“å­˜åŠ¨æ€èµ„æºçš„è¯ï¼Œæ•°æ®çš„å®æ—¶æ€§å°±ä¸ä¼šä¸å¤ªå¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬éƒ½åªä¼šå»ç¼“å­˜ä¸€äº›ä¸å¤ªå®¹æ˜“è¢«æ”¹å˜çš„é™æ€èµ„æºã€‚

## ç¼“å­˜å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿä»–çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ 

å…ˆè¯´è¯´ï¼Œç¼“å­˜å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚

 *  å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œä¼ è¾“ï¼ŒèŠ‚çº¦å®½å¸¦ï¼ˆå°±æ˜¯çœé’±ï¼‰
 *  æ›´å¿«çš„åŠ è½½é¡µé¢ï¼ˆå°±æ˜¯åŠ é€Ÿï¼‰
 *  å‡å°‘æœåŠ¡å™¨è´Ÿè½½ï¼Œé¿å…æœåŠ¡å™¨è¿‡è½½çš„æƒ…å†µå‡ºç°ã€‚ï¼ˆå°±æ˜¯å‡è½½ï¼‰

å†è¯´è¯´ç¼ºç‚¹

 *  å å†…å­˜ï¼ˆæœ‰äº›ç¼“å­˜ä¼šè¢«å­˜åˆ°å†…å­˜ä¸­ï¼‰

å…¶å®æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æœ€æœ€æœ€æœ€å…³å¿ƒçš„ï¼Œè¿˜æ˜¯"æ›´å¿«çš„åŠ è½½é¡µé¢";å°¤å…¶æ˜¯å¯¹äºreact/vueç­‰SPAï¼ˆå•é¡µé¢ï¼‰åº”ç”¨æ¥è¯´ï¼Œé¦–å±åŠ è½½æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç¼“å­˜å°±æ˜¾å¾—éå¸¸é‡è¦ã€‚ä¸éœ€è¦å¾€åç«¯è¯·æ±‚ï¼Œç›´æ¥åœ¨ç¼“å­˜ä¸­è¯»å–ã€‚é€Ÿåº¦ä¸Šï¼Œä¼šæœ‰æ˜¾è‘—çš„æå‡ã€‚æ˜¯ä¸€ç§æå‡ç½‘ç«™æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„æœ‰æ•ˆç­–ç•¥ã€‚

httpç¼“å­˜åˆåˆ†ä¸ºä¸¤ç§ä¸¤ç§ç¼“å­˜ï¼Œå¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜,æˆ‘ä»¬æ¥æ·±åº¦å‰–æä¸€ä¸‹å¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜å„è‡ªçš„ä¼˜åŠ£ä»¥åŠä»–ä»¬çš„ä½¿ç”¨åœºæ™¯ä»¥åŠä½¿ç”¨åŸç†

httpç¼“å­˜æµç¨‹å›¾â†“

![image_61a63dfc.png](../images//image_61a63dfc.png) image.png

## å¼ºåˆ¶ç¼“å­˜ 

å¼ºåˆ¶ç¼“å­˜ï¼Œæˆ‘ä»¬ç®€ç§°å¼ºç¼“å­˜ã€‚

ä»å¼ºåˆ¶ç¼“å­˜çš„è§’åº¦è§¦å‘ï¼Œå¦‚æœæµè§ˆå™¨åˆ¤æ–­è¯·æ±‚çš„ç›®æ ‡èµ„æºæœ‰æ•ˆå‘½ä¸­å¼ºç¼“å­˜ï¼Œå¦‚æœå‘½ä¸­ï¼Œåˆ™å¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¯»å–ç›®æ ‡èµ„æºï¼Œæ— éœ€ä¸æœåŠ¡å™¨åšä»»ä½•é€šè®¯ã€‚

### åŸºäºExpireså­—æ®µå®ç°çš„å¼ºç¼“å­˜ 

åœ¨ä»¥å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å“åº”å¤´çš„`Expires`å­—æ®µå»å®ç°å¼ºç¼“å­˜ã€‚å¦‚ä¸‹å›¾â†“

![image_c097a49e.png](../images//image_c097a49e.png) image.png

`Expires`å­—æ®µçš„ä½œç”¨æ˜¯ï¼Œè®¾å®šä¸€ä¸ªå¼ºç¼“å­˜æ—¶é—´ã€‚åœ¨æ­¤æ—¶é—´èŒƒå›´å†…ï¼Œåˆ™ä»å†…å­˜ï¼ˆæˆ–ç£ç›˜ï¼‰ä¸­è¯»å–ç¼“å­˜è¿”å›ã€‚

æ¯”å¦‚è¯´å°†æŸä¸€èµ„æºè®¾ç½®å“åº”å¤´ä¸º:Expires:new Date("2022-7-30 23:59:59")ï¼›

é‚£ä¹ˆï¼Œè¯¥èµ„æºåœ¨2022-7-30 23:59:59 ä¹‹å‰ï¼Œéƒ½ä¼šå»æœ¬åœ°çš„ç£ç›˜ï¼ˆæˆ–å†…å­˜ï¼‰ä¸­è¯»å–ï¼Œä¸ä¼šå»æœåŠ¡å™¨è¯·æ±‚ã€‚

ä½†æ˜¯ï¼Œ\*\*`Expires`å·²ç»è¢«åºŸå¼ƒäº†\*\*ã€‚å¯¹äºå¼ºç¼“å­˜æ¥è¯´ï¼Œ`Expires`å·²ç»ä¸æ˜¯å®ç°å¼ºç¼“å­˜çš„é¦–é€‰ã€‚

å› ä¸ºExpiresåˆ¤æ–­å¼ºç¼“å­˜æ˜¯å¦è¿‡æœŸçš„æœºåˆ¶æ˜¯:è·å–æœ¬åœ°æ—¶é—´æˆ³ï¼Œå¹¶å¯¹å…ˆå‰æ‹¿åˆ°çš„èµ„æºæ–‡ä»¶ä¸­çš„`Expires`å­—æ®µçš„æ—¶é—´åšæ¯”è¾ƒã€‚æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦å¯¹æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå·¨å¤§çš„æ¼æ´ï¼šâ€œå¦‚æœæˆ‘æœ¬åœ°æ—¶é—´ä¸å‡†å’‹åŠï¼Ÿâ€

æ˜¯çš„ï¼Œ`Expires`è¿‡åº¦ä¾èµ–æœ¬åœ°æ—¶é—´ï¼Œå¦‚æœæœ¬åœ°ä¸æœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥ï¼Œå°±ä¼šå‡ºç°èµ„æºæ— æ³•è¢«ç¼“å­˜æˆ–è€…èµ„æºæ°¸è¿œè¢«ç¼“å­˜çš„æƒ…å†µã€‚æ‰€ä»¥ï¼Œ`Expires`å­—æ®µå‡ ä¹ä¸è¢«ä½¿ç”¨äº†ã€‚ç°åœ¨çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸æ¨èä½¿ç”¨`Expires`ï¼Œå¼ºç¼“å­˜åŠŸèƒ½é€šå¸¸ä½¿ç”¨`cache-control`å­—æ®µæ¥ä»£æ›¿`Expires`å­—æ®µã€‚

æ²¡æƒ³åˆ°å§ï¼Œæ•´åŠå¤©ï¼Œè¿™ä¸ªå±æ€§æ˜¯åºŸçš„ã€‚

![image_1fd388e2.png](../images//image_1fd388e2.png) image.png

### åŸºäºCache-controlå®ç°çš„å¼ºç¼“å­˜ï¼ˆä»£æ›¿Expiresçš„å¼ºç¼“å­˜å®ç°æ–¹æ³•ï¼‰ 

`Cache-control`è¿™ä¸ªå­—æ®µåœ¨http1.1ä¸­è¢«å¢åŠ ï¼Œ`Cache-control`å®Œç¾è§£å†³äº†`Expires`æœ¬åœ°æ—¶é—´å’ŒæœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥çš„é—®é¢˜ã€‚æ˜¯å½“ä¸‹çš„é¡¹ç›®ä¸­å®ç°å¼ºç¼“å­˜çš„æœ€å¸¸è§„æ–¹æ³•ã€‚

`Cache-control`çš„ä½¿ç”¨æ–¹æ³•é¡µå¾ˆç®€å•ï¼Œåªè¦åœ¨èµ„æºçš„å“åº”å¤´ä¸Šå†™ä¸Šéœ€è¦ç¼“å­˜å¤šä¹…å°±å¥½äº†ï¼Œå•ä½æ˜¯ç§’ã€‚æ¯”å¦‚â†“

```java
//å¾€å“åº”å¤´ä¸­å†™å…¥éœ€è¦ç¼“å­˜çš„æ—¶é—´
res.writeHead(200,{
Â Â Â Â 'Cache-Control':'max-age=10'
});
å¤åˆ¶ä»£ç 
```

ä¸‹å›¾çš„æ„æ€å°±æ˜¯ï¼Œä»è¯¥èµ„æºç¬¬ä¸€æ¬¡è¿”å›çš„æ—¶å€™å¼€å§‹ï¼Œå¾€åçš„10ç§’é’Ÿå†…å¦‚æœè¯¥èµ„æºè¢«å†æ¬¡è¯·æ±‚ï¼Œåˆ™ä»ç¼“å­˜ä¸­è¯»å–ã€‚![image_476853d6.png](../images//image_476853d6.png)

Cache-Control:max-age=Nï¼ŒNå°±æ˜¯éœ€è¦ç¼“å­˜çš„ç§’æ•°ã€‚ä»ç¬¬ä¸€æ¬¡è¯·æ±‚èµ„æºçš„æ—¶å€™å¼€å§‹ï¼Œå¾€åNç§’å†…ï¼Œèµ„æºè‹¥å†æ¬¡è¯·æ±‚ï¼Œåˆ™ç›´æ¥ä»ç£ç›˜ï¼ˆæˆ–å†…å­˜ä¸­è¯»å–ï¼‰ï¼Œä¸ä¸æœåŠ¡å™¨åšä»»ä½•äº¤äº’ã€‚

`Cache-control`ä¸­å› ä¸ºmax-ageåé¢çš„å€¼æ˜¯ä¸€ä¸ªæ»‘åŠ¨æ—¶é—´ï¼Œä»æœåŠ¡å™¨ç¬¬ä¸€æ¬¡è¿”å›è¯¥èµ„æºæ—¶å¼€å§‹å€’è®¡æ—¶ã€‚æ‰€ä»¥ä¹Ÿå°±ä¸éœ€è¦æ¯”å¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶é—´ï¼Œè§£å†³äº†`Expires`æ‰€å­˜åœ¨çš„å·¨å¤§æ¼æ´ã€‚

`Cache-control`æœ‰max-ageã€s-maxageã€no-cacheã€no-storeã€privateã€publicè¿™å…­ä¸ªå±æ€§ã€‚

 *  max-ageå†³å®šå®¢æˆ·ç«¯èµ„æºè¢«ç¼“å­˜å¤šä¹…ã€‚
 *  s-maxageå†³å®šä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„æ—¶é•¿ã€‚
 *  no-cacheè¡¨ç¤ºæ˜¯å¼ºåˆ¶è¿›è¡Œåå•†ç¼“å­˜ã€‚
 *  no-storeæ˜¯è¡¨ç¤ºç¦æ­¢ä»»ä½•ç¼“å­˜ç­–ç•¥ã€‚
 *  publicè¡¨ç¤ºèµ„æºå³å¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜ä¹Ÿå¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ã€‚
 *  privateè¡¨ç¤ºèµ„æºåªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜ã€‚

### no-cacheå’Œno-store 

no\_cacheæ˜¯`Cache-control`çš„ä¸€ä¸ªå±æ€§ã€‚å®ƒå¹¶ä¸åƒå­—é¢æ„æ€ä¸€æ ·ç¦æ­¢ç¼“å­˜ï¼Œå®é™…ä¸Šï¼Œno-cacheçš„æ„æ€æ˜¯å¼ºåˆ¶è¿›è¡Œåå•†ç¼“å­˜ã€‚å¦‚æœæŸä¸€èµ„æºçš„`Cache-control`ä¸­è®¾ç½®äº†no-cacheï¼Œé‚£ä¹ˆè¯¥èµ„æºä¼šç›´æ¥è·³è¿‡å¼ºç¼“å­˜çš„æ ¡éªŒï¼Œç›´æ¥å»æœåŠ¡å™¨è¿›è¡Œåå•†ç¼“å­˜ã€‚è€Œno-storeå°±æ˜¯ç¦æ­¢æ‰€æœ‰çš„ç¼“å­˜ç­–ç•¥äº†ã€‚

> æ³¨æ„ï¼Œno-cacheå’Œno-storeæ˜¯ä¸€ç»„äº’æ–¥å±æ€§ï¼Œè¿™ä¸¤ä¸ªå±æ€§ä¸èƒ½åŒæ—¶å‡ºç°åœ¨`Cache-Control`ä¸­ã€‚

### publicå’Œprivate 

ä¸€èˆ¬è¯·æ±‚æ˜¯ä»å®¢æˆ·ç«¯ç›´æ¥å‘é€åˆ°æœåŠ¡ç«¯ï¼Œå¦‚ä¸‹â†“

![image_55198395.png](../images//image_55198395.png) image.png

ä½†æœ‰äº›æƒ…å†µä¸‹æ˜¯ä¾‹å¤–çš„ï¼šæ¯”å¦‚ï¼Œå‡ºç°ä»£ç†æœåŠ¡å™¨ï¼Œå¦‚ä¸‹â†“

![image_a54c31a8.png](../images//image_a54c31a8.png) image.png

è€Œpublicå’Œprivateå°±æ˜¯å†³å®šèµ„æºæ˜¯å¦å¯ä»¥åœ¨ä»£ç†æœåŠ¡å™¨è¿›è¡Œç¼“å­˜çš„å±æ€§ã€‚

å…¶ä¸­ï¼Œpublicè¡¨ç¤ºèµ„æºåœ¨å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥è¢«ç¼“å­˜ã€‚

privateåˆ™è¡¨ç¤ºèµ„æºåªèƒ½åœ¨å®¢æˆ·ç«¯è¢«ç¼“å­˜ï¼Œæ‹’ç»èµ„æºåœ¨ä»£ç†æœåŠ¡å™¨ç¼“å­˜ã€‚

å¦‚æœè¿™ä¸¤ä¸ªå±æ€§å€¼éƒ½æ²¡æœ‰è¢«è®¾ç½®ï¼Œåˆ™é»˜è®¤ä¸ºprivate

> æ³¨æ„ï¼Œpublicå’Œprivateä¹Ÿæ˜¯ä¸€ç»„äº’æ–¥å±æ€§ã€‚ä»–ä»¬ä¸¤ä¸ªä¸èƒ½åŒæ—¶å‡ºç°åœ¨å“åº”å¤´çš„`cache-control`å­—æ®µä¸­ã€‚

### max-ageå’Œs-maxage 

max-ageè¡¨ç¤ºçš„æ—¶é—´èµ„æºåœ¨å®¢æˆ·ç«¯ç¼“å­˜çš„æ—¶é•¿ï¼Œè€Œs-maxageè¡¨ç¤ºçš„æ˜¯èµ„æºåœ¨ä»£ç†æœåŠ¡å™¨å¯ä»¥ç¼“å­˜çš„æ—¶é•¿ã€‚

åœ¨ä¸€èˆ¬çš„é¡¹ç›®æ¶æ„ä¸­max-ageå°±å¤Ÿç”¨ã€‚

è€Œs-maxageå› ä¸ºæ˜¯ä»£ç†æœåŠ¡ç«¯çš„ç¼“å­˜æ—¶é•¿ï¼Œä»–å¿…é¡»å’Œä¸Šé¢è¯´çš„publicå±æ€§ä¸€èµ·ä½¿ç”¨ï¼ˆpublicå±æ€§è¡¨ç¤ºèµ„æºå¯ä»¥åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ç¼“å­˜ï¼‰ã€‚

> æ³¨æ„ï¼Œmax-ageå’Œs-maxageå¹¶ä¸äº’æ–¥ã€‚ä»–ä»¬å¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚

é‚£ä¹ˆ,Cache-controlå¦‚ä½•è®¾ç½®å¤šä¸ªå€¼å‘¢ï¼Ÿç”¨é€—å·åˆ†å‰²ï¼Œå¦‚ä¸‹â†“

`Cache-control:max-age=10000,s-maxage=200000,public`

å¼ºåˆ¶ç¼“å­˜å°±æ˜¯ä»¥ä¸Šè¿™ä¸¤ç§æ–¹æ³•äº†ã€‚ç°åœ¨æˆ‘ä»¬å›è¿‡å¤´æ¥èŠèŠï¼Œ`Expires`éš¾é“å°±ä¸€ç‚¹ç”¨éƒ½æ²¡æœ‰äº†å—ï¼Ÿä¹Ÿä¸æ˜¯ï¼Œè™½ç„¶`Cache-controlæ˜¯Expires`çš„å®Œå…¨æ›¿ä»£å“ï¼Œä½†æ˜¯å¦‚æœè¦è€ƒè™‘å‘ä¸‹å…¼å®¹çš„è¯ï¼Œåœ¨`Cache-control`ä¸æ”¯æŒçš„æ—¶å€™ï¼Œè¿˜æ˜¯è¦ä½¿ç”¨`Expires`ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å½“å‰ä½¿ç”¨çš„è¿™ä¸ªå±æ€§çš„å”¯ä¸€ç†ç”±ã€‚

## åå•†ç¼“å­˜ 

> æ¸©é¦¨æç¤º:åå•†ç¼“å­˜çš„å†…å®¹ä¼šæœ‰ä¸€ç‚¹ç‚¹ç»•ã€‚éœ€è¦ä»”ç»†é˜…è¯»ã€‚

### åŸºäºlast-modifiedçš„åå•†ç¼“å­˜ 

åŸºäºlast-modifiedçš„åå•†ç¼“å­˜å®ç°æ–¹å¼æ˜¯:

1.  é¦–å…ˆéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è¯»å‡ºæ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œ
2.  å°†è¯»å‡ºæ¥çš„ä¿®æ”¹æ—¶é—´èµ‹ç»™å“åº”å¤´çš„ `last-modified`å­—æ®µã€‚
3.  æœ€åè®¾ç½® `Cache-control:no-cache`

ä¸‰æ­¥ç¼ºä¸€ä¸å¯ã€‚

å¦‚ä¸‹å›¾â†“

![image_20d3c257.png](../images//image_20d3c257.png) image.png

æ³¨æ„åœˆå‡ºæ¥çš„ä¸‰è¡Œã€‚

ç¬¬ä¸€è¡Œï¼Œè¯»å‡ºä¿®æ”¹æ—¶é—´ã€‚

ç¬¬äºŒè¡Œï¼Œç»™è¯¥èµ„æºå“åº”å¤´çš„`last-modified`å­—æ®µèµ‹å€¼ä¿®æ”¹æ—¶é—´

ç¬¬ä¸‰è¡Œï¼Œç»™è¯¥èµ„æºå“åº”å¤´çš„`Cache-Control`å­—æ®µå€¼è®¾ç½®ä¸º:no-cache.(ä¸Šæ–‡æœ‰ä»‹ç»ï¼ŒCache-control:no-cacheçš„æ„æ€æ˜¯è·³è¿‡å¼ºç¼“å­˜æ ¡éªŒï¼Œç›´æ¥è¿›è¡Œåå•†ç¼“å­˜ã€‚)

è¿˜æ²¡å®Œã€‚åˆ°è¿™é‡Œè¿˜æ— æ³•å®ç°åå•†ç¼“å­˜

å½“å®¢æˆ·ç«¯è¯»å–åˆ°`last-modified`çš„æ—¶å€™ï¼Œä¼šåœ¨ä¸‹æ¬¡çš„è¯·æ±‚æ ‡å¤´ä¸­æºå¸¦ä¸€ä¸ªå­—æ®µ:`If-Modified-Since`ã€‚

![image_558ab726.png](../images//image_558ab726.png) image.png

è€Œè¿™ä¸ªè¯·æ±‚å¤´ä¸­çš„`If-Modified-Since`å°±æ˜¯æœåŠ¡å™¨ç¬¬ä¸€æ¬¡ä¿®æ”¹æ—¶å€™ç»™ä»–çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„

![image_bbc8d562.png](../images//image_bbc8d562.png) è¿™ä¸€è¡Œã€‚

é‚£ä¹ˆä¹‹åæ¯æ¬¡å¯¹è¯¥èµ„æºçš„è¯·æ±‚ï¼Œéƒ½ä¼šå¸¦ä¸Š`If-Modified-Since`è¿™ä¸ªå­—æ®µï¼Œè€ŒåŠ¡ç«¯å°±éœ€è¦æ‹¿åˆ°è¿™ä¸ªæ—¶é—´å¹¶å†æ¬¡è¯»å–è¯¥èµ„æºçš„ä¿®æ”¹æ—¶é—´ï¼Œè®©ä»–ä»¬ä¸¤ä¸ªåšä¸€ä¸ªæ¯”å¯¹æ¥å†³å®šæ˜¯è¯»å–ç¼“å­˜è¿˜æ˜¯è¿”å›æ–°çš„èµ„æºã€‚

å¦‚å›¾â†“

![image_3564b28d.png](../images//image_3564b28d.png) image.png

è¿™æ ·ï¼Œå°±æ˜¯åå•†ç¼“å­˜çš„æ‰€æœ‰æ“ä½œäº†ã€‚

çœ‹åˆ°è¿™é‡Œï¼Œæœ‰äº›å°ä¼™ä¼´å¯èƒ½æœ‰äº›è¿·ç³Šäº†ã€‚

![image_76552a6f.png](../images//image_76552a6f.png) image.png

æ²¡å…³ç³»ï¼Œæˆ‘ä»¬ç”¨ä¸€å¼ å›¾æ¥è§£é‡Šä¸‹åå•†ç¼“å­˜ã€‚

![image_0724b1e1.png](../images//image_0724b1e1.png) image.png

ä½¿ç”¨ä»¥ä¸Šæ–¹å¼çš„åå•†ç¼“å­˜å·²ç»å­˜åœ¨ä¸¤ä¸ªéå¸¸æ˜æ˜¾çš„æ¼æ´ã€‚è¿™ä¸¤ä¸ªæ¼æ´éƒ½æ˜¯åŸºäºæ–‡ä»¶æ˜¯é€šè¿‡æ¯”è¾ƒä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦æ›´æ”¹è€Œäº§ç”Ÿçš„ã€‚

1.å› ä¸ºæ˜¯æ›´å…·æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­çš„ï¼Œæ‰€ä»¥ï¼Œåœ¨æ–‡ä»¶å†…å®¹æœ¬èº«ä¸ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œä¾ç„¶æœ‰å¯èƒ½æ›´æ–°æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼ˆæ¯”å¦‚ä¿®æ”¹æ–‡ä»¶åå†æ”¹å›æ¥ï¼‰ï¼Œè¿™æ ·ï¼Œå°±æœ‰å¯èƒ½æ–‡ä»¶å†…å®¹æ˜æ˜æ²¡æœ‰ä¿®æ”¹ï¼Œä½†æ˜¯ç¼“å­˜ä¾ç„¶å¤±æ•ˆäº†ã€‚

2.å½“æ–‡ä»¶åœ¨æçŸ­æ—¶é—´å†…å®Œæˆä¿®æ”¹çš„æ—¶å€™ï¼ˆæ¯”å¦‚å‡ ç™¾æ¯«ç§’ï¼‰ã€‚å› ä¸ºæ–‡ä»¶ä¿®æ”¹æ—¶é—´è®°å½•çš„æœ€å°å•ä½æ˜¯ç§’ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæ–‡ä»¶åœ¨å‡ ç™¾æ¯«ç§’å†…å®Œæˆä¿®æ”¹çš„è¯ï¼Œæ–‡ä»¶ä¿®æ”¹æ—¶é—´ä¸ä¼šæ”¹å˜ï¼Œè¿™æ ·ï¼Œå³ä½¿æ–‡ä»¶å†…å®¹ä¿®æ”¹äº†ï¼Œä¾ç„¶ä¸ä¼š è¿”å›æ–°çš„æ–‡ä»¶ã€‚

ä¸ºäº†è§£å†³ä¸Šè¿°çš„è¿™ä¸¤ä¸ªé—®é¢˜ã€‚ä»`http1.1`å¼€å§‹æ–°å¢äº†ä¸€ä¸ªå¤´ä¿¡æ¯ï¼Œ`ETag`(Entity å®ä½“æ ‡ç­¾)

åˆæ¥æ–°ä¸œè¥¿äº†ï¼Œå…„å¼Ÿä»¬é¡¶ä½

![image_3c39b2d5.png](../images//image_3c39b2d5.png) image.png

### åŸºç¡€ETagçš„åå•†ç¼“å­˜ 

ä¸ç”¨å¤ªæ‹…å¿ƒï¼Œå¦‚æœä½ å·²ç»ç†è§£äº†ä¸Šé¢æ¯”è¾ƒæ—¶é—´æˆ³å½¢å¼çš„åå•†ç¼“å­˜çš„è¯ï¼Œ`ETag`å¯¹ä½ æ¥è¯´ä¸ä¼šæœ‰éš¾åº¦ã€‚

`ETag`å°±æ˜¯å°†åŸå…ˆåå•†ç¼“å­˜çš„æ¯”è¾ƒæ—¶é—´æˆ³çš„å½¢å¼ä¿®æ”¹æˆäº†æ¯”è¾ƒæ–‡ä»¶æŒ‡çº¹ã€‚

> æ–‡ä»¶æŒ‡çº¹:æ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºçš„å”¯ä¸€å“ˆå¸Œå€¼ã€‚æ–‡ä»¶å†…å®¹ä¸€æ—¦æ”¹å˜åˆ™æŒ‡çº¹æ”¹å˜ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æµç¨‹â†“

1.ç¬¬ä¸€æ¬¡è¯·æ±‚æŸèµ„æºçš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯è¯»å–æ–‡ä»¶å¹¶è®¡ç®—å‡ºæ–‡ä»¶æŒ‡çº¹ï¼Œå°†æ–‡ä»¶æŒ‡çº¹æ”¾åœ¨å“åº”å¤´çš„`etag`å­—æ®µä¸­è·Ÿèµ„æºä¸€èµ·è¿”å›ç»™å®¢æˆ·ç«¯ã€‚

2.ç¬¬äºŒæ¬¡è¯·æ±‚æŸèµ„æºçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯è‡ªåŠ¨ä»ç¼“å­˜ä¸­è¯»å–å‡ºä¸Šä¸€æ¬¡æœåŠ¡ç«¯è¿”å›çš„`ETag`ä¹Ÿå°±æ˜¯æ–‡ä»¶æŒ‡çº¹ã€‚å¹¶èµ‹ç»™è¯·æ±‚å¤´çš„`if-None-Match`å­—æ®µï¼Œè®©ä¸Šä¸€æ¬¡çš„æ–‡ä»¶æŒ‡çº¹è·Ÿéšè¯·æ±‚ä¸€èµ·å›åˆ°æœåŠ¡ç«¯ã€‚

3.æœåŠ¡ç«¯æ‹¿åˆ°è¯·æ±‚å¤´ä¸­çš„`is-None-Match`å­—æ®µå€¼ï¼ˆä¹Ÿå°±æ˜¯ä¸Šä¸€æ¬¡çš„æ–‡ä»¶æŒ‡çº¹ï¼‰ï¼Œå¹¶å†æ¬¡è¯»å–ç›®æ ‡èµ„æºå¹¶ç”Ÿæˆæ–‡ä»¶æŒ‡çº¹ï¼Œä¸¤ä¸ªæŒ‡çº¹åšå¯¹æ¯”ã€‚å¦‚æœä¸¤ä¸ªæ–‡ä»¶æŒ‡çº¹å®Œå…¨å»åˆï¼Œè¯´æ˜æ–‡ä»¶æ²¡æœ‰è¢«æ”¹å˜ï¼Œåˆ™ç›´æ¥è¿”å›304çŠ¶æ€ç å’Œä¸€ä¸ªç©ºçš„å“åº”ä½“å¹¶returnã€‚å¦‚æœä¸¤ä¸ªæ–‡ä»¶æŒ‡çº¹ä¸å»åˆï¼Œåˆ™è¯´æ˜æ–‡ä»¶è¢«æ›´æ”¹ï¼Œé‚£ä¹ˆå°†æ–°çš„æ–‡ä»¶æŒ‡çº¹é‡æ–°å­˜å‚¨åˆ°å“åº”å¤´çš„`ETag`ä¸­å¹¶è¿”å›ç»™å®¢æˆ·ç«¯

ä»£ç å›¾ä¾‹â†“

![image_0c309d89.png](../images//image_0c309d89.png) image.png

æµç¨‹ç¤ºä¾‹å›¾â†“

![image_487278db.png](../images//image_487278db.png) image.png

> ä»æ ¡éªŒæµç¨‹ä¸Šæ¥è¯´ï¼Œåå•†ç¼“å­˜çš„ä¿®æ”¹æ—¶é—´æ¯”å¯¹å’Œæ–‡ä»¶æŒ‡çº¹æ¯”å¯¹ï¼Œå‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚

### ETagä¹Ÿæœ‰ç¼ºç‚¹ 

 *  ETagéœ€è¦è®¡ç®—æ–‡ä»¶æŒ‡çº¹è¿™æ ·æ„å‘³ç€ï¼ŒæœåŠ¡ç«¯éœ€è¦æ›´å¤šçš„è®¡ç®—å¼€é”€ã€‚ã€‚å¦‚æœæ–‡ä»¶å°ºå¯¸å¤§ï¼Œæ•°é‡å¤šï¼Œå¹¶ä¸”è®¡ç®—é¢‘ç¹ï¼Œé‚£ä¹ˆETagçš„è®¡ç®—å°±ä¼šå½±å“æœåŠ¡å™¨çš„æ€§èƒ½ã€‚æ˜¾ç„¶ï¼ŒETagåœ¨è¿™æ ·çš„åœºæ™¯ä¸‹å°±ä¸æ˜¯å¾ˆé€‚åˆã€‚
 *  ETagæœ‰å¼ºéªŒè¯å’Œå¼±éªŒè¯ï¼Œæ‰€è°“å°†å¼ºéªŒè¯ï¼ŒETagç”Ÿæˆçš„å“ˆå¸Œç æ·±å…¥åˆ°æ¯ä¸ªå­—èŠ‚ã€‚å“ªæ€•æ–‡ä»¶ä¸­åªæœ‰ä¸€ä¸ªå­—èŠ‚æ”¹å˜äº†ï¼Œä¹Ÿä¼šç”Ÿæˆä¸åŒçš„å“ˆå¸Œå€¼ï¼Œå®ƒå¯ä»¥ä¿è¯æ–‡ä»¶å†…å®¹ç»å¯¹çš„ä¸å˜ã€‚ä½†æ˜¯ï¼Œå¼ºéªŒè¯éå¸¸æ¶ˆè€—è®¡ç®—é‡ã€‚ETagè¿˜æœ‰ä¸€ä¸ªå¼±éªŒè¯ï¼Œå¼±éªŒè¯æ˜¯æå–æ–‡ä»¶çš„éƒ¨åˆ†å±æ€§æ¥ç”Ÿæˆå“ˆå¸Œå€¼ã€‚å› ä¸ºä¸å¿…ç²¾ç¡®åˆ°æ¯ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä»–çš„æ•´ä½“é€Ÿåº¦ä¼šæ¯”å¼ºéªŒè¯å¿«ï¼Œä½†æ˜¯å‡†ç¡®ç‡ä¸é«˜ã€‚ä¼šé™ä½åå•†ç¼“å­˜çš„æœ‰æ•ˆæ€§ã€‚

> å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸åŒäº`cache-control`æ˜¯`expires`çš„å®Œå…¨æ›¿ä»£æ–¹æ¡ˆ(è¯´äººè¯:èƒ½ç”¨`cache-control`å°±ä¸è¦ç”¨`expiress`)ã€‚`ETag`å¹¶ä¸æ˜¯`last-modified`çš„å®Œå…¨æ›¿ä»£æ–¹æ¡ˆã€‚è€Œæ˜¯`last-modified`çš„è¡¥å……æ–¹æ¡ˆï¼ˆè¯´äººè¯ï¼šé¡¹ç›®ä¸­åˆ°åº•æ˜¯ç”¨`ETag`è¿˜æ˜¯`last-modified`å®Œå…¨å–å†³äºä¸šåŠ¡åœºæ™¯ï¼Œè¿™ä¸¤ä¸ªæ²¡æœ‰è°æ›´å¥½è°æ›´åï¼‰ã€‚

# è¿½åŠ  

æœ‰æ˜å‹è¯´ğŸ‘‡![image_bfe2bc82.png](../images//image_bfe2bc82.png)

æˆ‘æ¥è¡¥è¶³ä¸€ä¸‹ã€‚

## å¦‚ä½•è®¾ç½®ç¼“å­˜ 

ä»å‰ç«¯çš„è§’åº¦æ¥è¯´:

ä½ ä»€ä¹ˆéƒ½ä¸ç”¨å¹²ï¼Œç¼“å­˜æ˜¯ç¼“å­˜åœ¨å‰ç«¯ï¼Œä½†å®é™…ä¸Šä»£ç æ˜¯åç«¯çš„åŒå­¦æ¥å†™çš„ã€‚å¦‚æœä½ éœ€è¦å®ç°å‰ç«¯ç¼“å­˜çš„è¯å•Šï¼Œé€šçŸ¥åç«¯çš„åŒå­¦åŠ å“åº”å¤´å°±å¥½äº†ã€‚

ä»åç«¯çš„è§’åº¦æ¥è¯´

è¯·å‚è€ƒæ–‡ç« ï¼Œè™½ç„¶æ–‡ç« é‡Œçš„åç«¯æ˜¯ä½¿ç”¨node.jså†™çš„ï¼Œä½†æˆ‘å†™äº†è¯¦ç»†çš„æ³¨é‡Šã€‚å¯¹äºåç«¯çš„åŒå­¦æ¥è¯´ã€‚åº”è¯¥ä¸éš¾çœ‹æ‡‚ã€‚

## å“ªäº›æ–‡ä»¶å¯¹åº”å“ªäº›ç¼“å­˜ 

è¿™ä¸ªï¼Œæˆ‘ç¡®å®å¿˜äº†è¯´ã€‚å“ˆå“ˆå“ˆã€‚

æœ‰å“ˆå¸Œå€¼çš„æ–‡ä»¶è®¾ç½®å¼ºç¼“å­˜å³å¯ã€‚æ²¡æœ‰å“ˆå¸Œå€¼çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚index.htmlï¼‰è®¾ç½®åå•†ç¼“å­˜

ä¸ºä»€ä¹ˆæœ‰å“ˆå¸Œå€¼çš„æ–‡ä»¶è®¾ç½®å¼ºç¼“å­˜

![image_3438348c.png](../images//image_3438348c.png) image.png ![image_87f6dbce.png](../images//image_87f6dbce.png) image.png

è¿™æ˜¯æˆ‘æ‰“å®ŒåŒ…ä¹‹åçš„cssæ–‡ä»¶ã€‚å¤§å®¶æ˜¯å¦æ³¨æ„åˆ°ã€‚æˆ‘åˆ’äº†çº¢çº¿çš„éƒ¨åˆ†ã€‚æ˜æ˜¾ï¼Œè¿™ç»ä¸æ˜¯æˆ‘çš„æ–‡ä»¶åã€‚è¿™ä¸²å’Œä¹±ç ä¸€æ ·çš„å­—ç¬¦ä¸²å«`å“ˆå¸Œå€¼`ã€‚æ¯æ¬¡æ‰“åŒ…ä¹‹åéƒ½ä¼šç”Ÿäº§ä¸€ä¸²æ–°çš„`å“ˆå¸Œå€¼`å¹¶è¿½åŠ åˆ°æˆ‘ä»¬çš„æ–‡ä»¶åä¸­ã€‚å“ˆå¸Œå€¼æ˜¯æ‰“åŒ…åçš„æ–‡ä»¶åçš„ä¸€éƒ¨åˆ†ã€‚

æˆ‘ä»¬ç»™cssè®¾ç½®å¼ºç¼“å­˜ï¼Œå“ªæ€•ç¼“å­˜1Wå¹´ã€‚åªè¦æˆ‘ä»¬é‡æ–°æ‰“åŒ…ï¼Œç”Ÿäº§æ–°çš„å“ˆå¸Œå€¼ã€‚é‚£ä¹ˆæ–‡ä»¶åå°±æ›´æ”¹äº†ã€‚å¯¹äºæœºå™¨æ¥è¯´ï¼Œæ›´æ”¹äº†æ–‡ä»¶åçš„æ–‡ä»¶ï¼Œå°±æ˜¯ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚

ä¸¾ä¸ªä¾‹å­ğŸ‘‡

æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªcssæ–‡ä»¶a1

ç¬¬ä¸€æ¬¡æ‰“åŒ…a1.cssæ–‡ä»¶è¿½åŠ å“ˆå¸Œå€¼å˜æˆäº† a1.aaaaa.css,æˆ‘ä»¬ç»™a1.aaaaa.cssè®¾ç½®äº†å¼ºç¼“å­˜1Wå¹´ã€‚

ç„¶åé¡¹ç›®æ”¹åŠ¨ï¼Œæˆ‘ä»¬åˆæ‰“åŒ…äº†ä¸€æ¬¡ã€‚æ‰“åŒ…åç”Ÿäº§æ–°çš„å“ˆå¸Œå€¼ï¼Œa1.aaaaa.csså˜æˆäº†a1.bbbbb.cssæ–‡ä»¶ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—®a1.bbbbb.cssæ–‡ä»¶çš„æ—¶å€™æ˜¯ä¸ä¼šè¢«ç¼“å­˜ã€‚å› ä¸º1Wå¹´çš„ç¼“å­˜æ˜¯ç»™a1.aaaaa.cssæ–‡ä»¶åšçš„ã€‚å…³æˆ‘a1.bbbbb.cssæ–‡ä»¶ä»€ä¹ˆäº‹ï¼Ÿè¿™æ ·æˆ‘ä»¬ä¹Ÿå°±èƒ½æ‹¿åˆ°æœ€æ–°çš„æ”¹åŠ¨ã€‚

å…¶ä»–å¯ä»¥è¢«webpackç”Ÿæˆå“ˆå¸Œå€¼çš„æ–‡ä»¶åŒç†ã€‚

ä¸ºä»€ä¹ˆindex.htmlä½¿ç”¨åå•†ç¼“å­˜

æ—¢ç„¶img/cssè¿™äº›æ–‡ä»¶éƒ½å¯ä»¥ç”¨å¼ºç¼“å­˜ã€‚é€šè¿‡æ›´æ”¹æ–‡ä»¶åçš„æ–¹å¼æ¥è·å–æœ€æ–°çš„æ•°æ®ï¼Œä¸ºä»€ä¹ˆæˆ‘å ‚å ‚index.htmlå°±è¦ç”¨åå•†å‘¢ï¼Ÿ

æˆ‘ç»™å¤§å®¶çœ‹ä¸ªå›¾

![image_4aae0cbe.png](../images//image_4aae0cbe.png) image.png

å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œindex.htmlæ˜¯ä¸ä¼šè®¾ç½®å“ˆå¸Œå€¼çš„ã€‚ï¼ˆå…·ä½“å¾—çœ‹è‡ªå·±é¡¹ç›®ä¸‹çš„distæ–‡ä»¶å¤¹ï¼‰

> æ³¨æ„ï¼šå“ˆå¸Œå€¼æ˜¯éœ€è¦webpackç”Ÿæˆçš„ã€‚ä¸æ˜¯å¤©ç”Ÿçš„ã€‚ä¸è¿‡æœ‰äº›æ¡†æ¶ä¼šè‡ªå¸¦ï¼ˆæ¯”å¦‚æˆ‘ä½¿ç”¨çš„umi.jsï¼‰,è®¾ç½®ç¼“å­˜å‰åŠ¡å¿…çœ‹ä¸‹è‡ªå·±çš„distæ–‡ä»¶ã€‚å› ä¸ºå¦‚æœæ²¡æœ‰é…ç½®çš„è¯ï¼Œä½ å¯èƒ½æ‰€æœ‰æ–‡ä»¶éƒ½ä¸å¸¦å“ˆå¸Œå€¼ã€‚

# æ€»ç»“ä¸€ä¸‹ 

 *  httpç¼“å­˜å¯ä»¥å‡å°‘å®½å¸¦æµé‡ï¼ŒåŠ å¿«å“åº”é€Ÿåº¦ã€‚
 *  å…³äºå¼ºç¼“å­˜ï¼Œ`cache-control`æ˜¯`Expires`çš„å®Œå…¨æ›¿ä»£æ–¹æ¡ˆï¼Œåœ¨å¯ä»¥ä½¿ç”¨`cache-control`çš„æƒ…å†µä¸‹ä¸è¦ä½¿ç”¨`expires`
 *  å…³äºåå•†ç¼“å­˜,`etag`å¹¶ä¸æ˜¯`last-modified`çš„å®Œå…¨æ›¿ä»£æ–¹æ¡ˆï¼Œè€Œæ˜¯è¡¥å……æ–¹æ¡ˆï¼Œå…·ä½“ç”¨å“ªä¸€ä¸ªï¼Œå–å†³äºä¸šåŠ¡åœºæ™¯ã€‚
 *  æœ‰äº›ç¼“å­˜æ˜¯ä»ç£ç›˜è¯»å–ï¼Œæœ‰äº›ç¼“å­˜æ˜¯ä»å†…å­˜è¯»å–ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç­”ï¼šä»å†…å­˜è¯»å–çš„ç¼“å­˜æ›´å¿«ã€‚
 *  æ‰€æœ‰å¸¦304çš„èµ„æºéƒ½æ˜¯åå•†ç¼“å­˜ï¼Œæ‰€æœ‰æ ‡æ³¨ï¼ˆä»å†…å­˜ä¸­è¯»å–/ä»ç£ç›˜ä¸­è¯»å–ï¼‰çš„èµ„æºéƒ½æ˜¯å¼ºç¼“å­˜ã€‚

> è°¢è°¢ä½ èƒ½é‚£ä¹ˆæœ‰è€å¿ƒçš„çœ‹å®Œã€‚ç¥ä½ å¥½è¿ã€‚

# ä½œè€…ï¼šå·¥è¾¹é¡µå­— 

https://juejin.cn/post/7127194919235485733

ç¥ æ‚¨:2022 å¹´æš´å¯Œï¼ä¸‡äº‹å¦‚æ„ï¼ ç‚¹èµå’Œåœ¨çœ‹å°±æ˜¯æœ€å¤§çš„æ”¯æŒ,![image_fd378378.png](../images//image_fd378378.png)æ¯”å¿ƒâ¤ï¸![image_38965d8f.png](../images//image_38965d8f.png)